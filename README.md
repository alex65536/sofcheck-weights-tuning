# Weights tuning for SoFCheck

This repository contains notebooks and datasets to tune the evaulation weights in
[SoFCheck chess engine][1].

The engine uses the tuning method described in [this post][2] (in Russian). It is similar to
[Texel's tuning method][3].

## Datasets

Datasets are prepared in [canonical SoFGameSet][8] format, as generated by [BattleField][4]. To
extract CSV with coefficients from these datasets, you need to build SoFCheck and use the
`make_datasets` utility from it. All the data is `bzip2`-compressed to take less disk space.

The datasets are as follows:

- `stockfish_20k.sgs.xz` contains 20'000 games played by [Stockfish][5] 13 against itself on short
time control (~100ms).
- `sofcheck1_30k.sgs.xz` contains 30'000 games played between SoFCheck commit [`1c75e30`][6] (call
it _v1_) and SoFCheck commmit [`0a52f13`][7] (call it _v2_). 10'000 games were played v1 against
v1, 10'000 games were played v1 against v2 and 10'000 games were played v2 against v2.
- `sofcheck2_100k.sgs.xz` contains 100'000 games between SoFChecks from commits [`faebcce`][9],
[`d4ded36`][10], [`f8ce5cc`][11] and [`6bc597b`][12]. There are ten unordered pairs possible
between these engines (including games with itself), and each pair played 10'000 games against each
other.
- `sofcheck3_40k.sgs.xz` contains 40'000 games between SoFChecks from commits [`e498bab`][13] and
[`a7df920`][14]. Each of the engines played 10'000 games with itself and 20'000 games with the other
engine.

More datasets may be available later.

## Notebooks

Jupyter notebooks, which we used to train SoFCheck, are also lacated in this repository. Note that
the results may be not completely reproducible because of randomness.

[1]: https://github.com/alex65536/sofcheck
[2]: https://habr.com/ru/post/305604/
[3]: https://www.chessprogramming.org/Texel%27s_Tuning_Method
[4]: https://github.com/alex65536/sofcheck-engine-tester/tree/master/battlefield
[5]: https://stockfishchess.org
[6]: https://github.com/alex65536/sofcheck/tree/1c75e3088d146f12186b31cfece738db63b7857e
[7]: https://github.com/alex65536/sofcheck/tree/0a52f1392d124d912da1fb16a27526e2412c5c27
[8]: https://github.com/alex65536/sofcheck/blob/master/docs/gameset.md
[9]: https://github.com/alex65536/sofcheck/commit/faebcce573ffc15b881edd996d7da266e524ac2f
[10]: https://github.com/alex65536/sofcheck/commit/d4ded36f0b974a9a679c4dae40e494ce52218c2f
[11]: https://github.com/alex65536/sofcheck/commit/f8ce5cce56b0800752df4f6483a8d158d93ce790
[12]: https://github.com/alex65536/sofcheck/commit/6bc597b874cf363821493ef1c4d623300f63cf76
[13]: https://github.com/alex65536/sofcheck/commit/e498bab1102e093516a0b512b897535d479397d9
[14]: https://github.com/alex65536/sofcheck/commit/a7df920b248c5209f85e50dc10e0c3019a22f85d
